<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Bullet Hell</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            padding: 20px;
            overflow: hidden;
        }
        
        .game-container {
            width: 100%;
            max-width: 800px;
            text-align: center;
        }
        
        header {
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00dbde, #fc00ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 15px 0;
        }
        
        .stat-box {
            background: rgba(0, 0, 0, 0.4);
            padding: 12px 25px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 120px;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #4cc9f0;
        }
        
        .game-board {
            position: relative;
            width: 600px;
            height: 400px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .grid {
            position: absolute;
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: repeat(30, 1fr);
            grid-template-rows: repeat(20, 1fr);
        }
        
        .cell {
            border: 1px solid rgba(255, 255, 255, 0.03);
        }
        
        .snake {
            background: linear-gradient(135deg, #4cc9f0, #4361ee);
            border-radius: 3px;
            z-index: 10;
        }
        
        .snake-head {
            background: linear-gradient(135deg, #4361ee, #3a0ca3);
            border-radius: 4px;
            z-index: 11;
        }
        
        .food {
            background: linear-gradient(135deg, #f72585, #b5179e);
            border-radius: 50%;
            animation: pulse 1s infinite alternate;
            z-index: 5;
        }
        
        .enemy {
            background: linear-gradient(135deg, #ff6b6b, #ff0000);
            border-radius: 50%;
            z-index: 8;
            box-shadow: 0 0 8px #ff0000;
        }
        
        .bullet {
            background: linear-gradient(135deg, #ffd166, #ff9e00);
            border-radius: 50%;
            z-index: 7;
            box-shadow: 0 0 6px #ffd166;
        }
        
        .controls {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        button {
            background: linear-gradient(45deg, #4361ee, #3a0ca3);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(10, 10, 30, 0.9);
            z-index: 100;
            border-radius: 10px;
        }
        
        .hidden {
            display: none;
        }
        
        .screen h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #4cc9f0;
        }
        
        .screen p {
            font-size: 1.2rem;
            max-width: 80%;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .instructions {
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 600px;
            text-align: left;
        }
        
        .instructions h3 {
            color: #f72585;
            margin-bottom: 10px;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin: 10px 0;
            line-height: 1.5;
        }
        
        .key {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 10px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        @keyframes pulse {
            from { transform: scale(0.9); }
            to { transform: scale(1.1); }
        }
        
        @keyframes flash {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        .flash {
            animation: flash 0.3s;
        }
        
        footer {
            margin-top: 20px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <header>
            <h1>Snake Bullet Hell</h1>
            <div class="stats">
                <div class="stat-box">
                    <div>SCORE</div>
                    <div id="score" class="stat-value">0</div>
                </div>
                <div class="stat-box">
                    <div>LEVEL</div>
                    <div id="level" class="stat-value">1</div>
                </div>
                <div class="stat-box">
                    <div>LIVES</div>
                    <div id="lives" class="stat-value">3</div>
                </div>
            </div>
        </header>
        
        <div class="game-board">
            <div class="grid" id="grid"></div>
            
            <div id="start-screen" class="screen">
                <h2>Snake Bullet Hell</h2>
                <p>Survive as long as possible! Control the snake with arrow keys. Avoid enemy bullets and don't hit walls!</p>
                <button id="start-btn">Start Game</button>
                
                <div class="instructions">
                    <h3>How to Play</h3>
                    <ul>
                        <li>Use <span class="key">←</span> <span class="key">↑</span> <span class="key">→</span> <span class="key">↓</span> arrow keys to move the snake</li>
                        <li>Eat <span style="color:#f72585">food</span> to grow longer and earn points</li>
                        <li>Avoid <span style="color:#ff6b6b">enemies</span> and their <span style="color:#ffd166">bullets</span></li>
                        <li>Every 100 points advances you to the next level</li>
                        <li>Each level adds more enemies and faster bullets</li>
                    </ul>
                </div>
            </div>
            
            <div id="game-over-screen" class="screen hidden">
                <h2>Game Over</h2>
                <p>Your final score: <span id="final-score">0</span></p>
                <p>Level reached: <span id="final-level">1</span></p>
                <button id="restart-btn">Play Again</button>
            </div>
        </div>
        
        <div class="controls">
            <button id="pause-btn">Pause</button>
            <button id="reset-btn">Reset</button>
        </div>
        
        <footer>
            <p>Survive the bullet hell! Each level increases difficulty.</p>
        </footer>
    </div>

    <script>
        // Game constants
        const GRID_WIDTH = 30;
        const GRID_HEIGHT = 20;
        const CELL_SIZE = 20;
        const INITIAL_SPEED = 150;
        const BULLET_SPEED = 3;
        
        // Game state
        let snake = [{x: 15, y: 10}];
        let direction = {x: 0, y: -1};
        let food = {x: 5, y: 5};
        let enemies = [];
        let bullets = [];
        let score = 0;
        let level = 1;
        let lives = 3;
        let gameSpeed = INITIAL_SPEED;
        let gameRunning = false;
        let gameLoop;
        let enemyShootTimer;
        let bulletMoveTimer;
        
        // DOM elements
        const grid = document.getElementById('grid');
        const scoreDisplay = document.getElementById('score');
        const levelDisplay = document.getElementById('level');
        const livesDisplay = document.getElementById('lives');
        const startScreen = document.getElementById('start-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const finalScoreDisplay = document.getElementById('final-score');
        const finalLevelDisplay = document.getElementById('final-level');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const resetBtn = document.getElementById('reset-btn');
        
        // Initialize grid
        function initGrid() {
            grid.innerHTML = '';
            for (let y = 0; y < GRID_HEIGHT; y++) {
                for (let x = 0; x < GRID_WIDTH; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.id = `cell-${x}-${y}`;
                    grid.appendChild(cell);
                }
            }
        }
        
        // Generate random position
        function getRandomPosition() {
            return {
                x: Math.floor(Math.random() * GRID_WIDTH),
                y: Math.floor(Math.random() * GRID_HEIGHT)
            };
        }
        
        // Create food at random position
        function createFood() {
            let newFood;
            let overlapping;
            
            do {
                overlapping = false;
                newFood = getRandomPosition();
                
                // Check if food overlaps with snake
                for (const segment of snake) {
                    if (segment.x === newFood.x && segment.y === newFood.y) {
                        overlapping = true;
                        break;
                    }
                }
                
                // Check if food overlaps with enemies
                for (const enemy of enemies) {
                    if (enemy.x === newFood.x && enemy.y === newFood.y) {
                        overlapping = true;
                        break;
                    }
                }
            } while (overlapping);
            
            food = newFood;
        }
        
        // Create enemies based on level
        function createEnemies() {
            enemies = [];
            const enemyCount = Math.min(3 + level, 10); // Max 10 enemies
            
            for (let i = 0; i < enemyCount; i++) {
                let newEnemy;
                let overlapping;
                
                do {
                    overlapping = false;
                    newEnemy = getRandomPosition();
                    
                    // Check if enemy overlaps with snake
                    for (const segment of snake) {
                        if (segment.x === newEnemy.x && segment.y === newEnemy.y) {
                            overlapping = true;
                            break;
                        }
                    }
                    
                    // Check if enemy overlaps with food
                    if (newEnemy.x === food.x && newEnemy.y === food.y) {
                        overlapping = true;
                    }
                    
                    // Check if enemy overlaps with other enemies
                    for (const enemy of enemies) {
                        if (enemy.x === newEnemy.x && enemy.y === newEnemy.y) {
                            overlapping = true;
                            break;
                        }
                    }
                } while (overlapping);
                
                enemies.push({
                    ...newEnemy,
                    id: Date.now() + i
                });
            }
        }
        
        // Draw game elements
        function draw() {
            // Clear grid
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                cell.className = 'cell';
            });
            
            // Draw snake
            snake.forEach((segment, index) => {
                const cell = document.getElementById(`cell-${segment.x}-${segment.y}`);
                if (cell) {
                    cell.classList.add(index === 0 ? 'snake-head' : 'snake');
                }
            });
            
            // Draw food
            const foodCell = document.getElementById(`cell-${food.x}-${food.y}`);
            if (foodCell) {
                foodCell.classList.add('food');
            }
            
            // Draw enemies
            enemies.forEach(enemy => {
                const enemyCell = document.getElementById(`cell-${enemy.x}-${enemy.y}`);
                if (enemyCell) {
                    enemyCell.classList.add('enemy');
                }
            });
            
            // Draw bullets
            bullets.forEach(bullet => {
                // Calculate bullet position in grid
                const gridX = Math.floor(bullet.x);
                const gridY = Math.floor(bullet.y);
                
                if (gridX >= 0 && gridX < GRID_WIDTH && gridY >= 0 && gridY < GRID_HEIGHT) {
                    const bulletCell = document.getElementById(`cell-${gridX}-${gridY}`);
                    if (bulletCell) {
                        bulletCell.classList.add('bullet');
                    }
                }
            });
        }
        
        // Move snake
        function moveSnake() {
            if (!gameRunning) return;
            
            const head = {...snake[0]};
            head.x += direction.x;
            head.y += direction.y;
            
            // Check wall collision
            if (head.x < 0 || head.x >= GRID_WIDTH || head.y < 0 || head.y >= GRID_HEIGHT) {
                loseLife();
                return;
            }
            
            // Check self collision
            for (let i = 0; i < snake.length; i++) {
                if (snake[i].x === head.x && snake[i].y === head.y) {
                    loseLife();
                    return;
                }
            }
            
            // Add new head
            snake.unshift(head);
            
            // Check food collision
            if (head.x === food.x && head.y === food.y) {
                // Increase score
                score += 10;
                scoreDisplay.textContent = score;
                
                // Create new food
                createFood();
                
                // Level up every 100 points
                if (score % 100 === 0) {
                    levelUp();
                }
            } else {
                // Remove tail if no food eaten
                snake.pop();
            }
            
            draw();
        }
        
        // Move bullets
        function moveBullets() {
            if (!gameRunning) return;
            
            // Move each bullet
            for (let i = bullets.length - 1; i >= 0; i--) {
                const bullet = bullets[i];
                bullet.x += bullet.dx * BULLET_SPEED;
                bullet.y += bullet.dy * BULLET_SPEED;
                
                // Remove bullets that are out of bounds
                if (bullet.x < 0 || bullet.x >= GRID_WIDTH || bullet.y < 0 || bullet.y >= GRID_HEIGHT) {
                    bullets.splice(i, 1);
                    continue;
                }
                
                // Check collision with snake
                const gridX = Math.floor(bullet.x);
                const gridY = Math.floor(bullet.y);
                
                for (const segment of snake) {
                    if (segment.x === gridX && segment.y === gridY) {
                        loseLife();
                        bullets.splice(i, 1);
                        break;
                    }
                }
            }
            
            draw();
        }
        
        // Enemy shooting
        function enemyShoot() {
            if (!gameRunning) return;
            
            const head = snake[0];
            
            enemies.forEach(enemy => {
                // Calculate direction to snake head
                const dx = head.x - enemy.x;
                const dy = head.y - enemy.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance > 0) {
                    bullets.push({
                        x: enemy.x,
                        y: enemy.y,
                        dx: dx / distance,
                        dy: dy / distance
                    });
                }
            });
        }
        
        // Level up
        function levelUp() {
            level++;
            levelDisplay.textContent = level;
            
            // Increase difficulty
            gameSpeed = Math.max(50, INITIAL_SPEED - (level * 10));
            
            // Create new enemies
            createEnemies();
            
            // Flash effect
            document.querySelector('.game-board').classList.add('flash');
            setTimeout(() => {
                document.querySelector('.game-board').classList.remove('flash');
            }, 300);
        }
        
        // Lose a life
        function loseLife() {
            lives--;
            livesDisplay.textContent = lives;
            
            if (lives <= 0) {
                gameOver();
            } else {
                // Reset snake position
                snake = [{x: 15, y: 10}];
                direction = {x: 0, y: -1};
                
                // Flash effect
                document.querySelector('.game-board').classList.add('flash');
                setTimeout(() => {
                    document.querySelector('.game-board').classList.remove('flash');
                }, 300);
            }
        }
        
        // Game over
        function gameOver() {
            gameRunning = false;
            clearInterval(gameLoop);
            clearInterval(enemyShootTimer);
            clearInterval(bulletMoveTimer);
            
            finalScoreDisplay.textContent = score;
            finalLevelDisplay.textContent = level;
            gameOverScreen.classList.remove('hidden');
        }
        
        // Start game
        function startGame() {
            // Reset game state
            snake = [{x: 15, y: 10}];
            direction = {x: 0, y: -1};
            score = 0;
            level = 1;
            lives = 3;
            gameSpeed = INITIAL_SPEED;
            bullets = [];
            
            // Update displays
            scoreDisplay.textContent = score;
            levelDisplay.textContent = level;
            livesDisplay.textContent = lives;
            
            // Create initial elements
            createFood();
            createEnemies();
            
            // Hide screens
            startScreen.classList.add('hidden');
            gameOverScreen.classList.add('hidden');
            
            // Start game loop
            gameRunning = true;
            gameLoop = setInterval(moveSnake, gameSpeed);
            enemyShootTimer = setInterval(enemyShoot, 1000);
            bulletMoveTimer = setInterval(moveBullets, 100);
            
            draw();
        }
        
        // Reset game
        function resetGame() {
            clearInterval(gameLoop);
            clearInterval(enemyShootTimer);
            clearInterval(bulletMoveTimer);
            gameRunning = false;
            startScreen.classList.remove('hidden');
            gameOverScreen.classList.add('hidden');
        }
        
        // Toggle pause
        function togglePause() {
            if (!gameRunning) return;
            
            if (gameLoop) {
                clearInterval(gameLoop);
                clearInterval(enemyShootTimer);
                clearInterval(bulletMoveTimer);
                gameRunning = false;
                pauseBtn.textContent = 'Resume';
            } else {
                gameRunning = true;
                gameLoop = setInterval(moveSnake, gameSpeed);
                enemyShootTimer = setInterval(enemyShoot, 1000);
                bulletMoveTimer = setInterval(moveBullets, 100);
                pauseBtn.textContent = 'Pause';
            }
        }
        
        // Handle keyboard input
        function handleKeydown(e) {
            if (!gameRunning) return;
            
            switch (e.key) {
                case 'ArrowUp':
                    if (direction.y === 0) direction = {x: 0, y: -1};
                    break;
                case 'ArrowDown':
                    if (direction.y === 0) direction = {x: 0, y: 1};
                    break;
                case 'ArrowLeft':
                    if (direction.x === 0) direction = {x: -1, y: 0};
                    break;
                case 'ArrowRight':
                    if (direction.x === 0) direction = {x: 1, y: 0};
                    break;
            }
        }
        
        // Event listeners
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', startGame);
        pauseBtn.addEventListener('click', togglePause);
        resetBtn.addEventListener('click', resetGame);
        document.addEventListener('keydown', handleKeydown);
        
        // Initialize game
        initGrid();
    </script>
</body>
</html>
